# Tezos Baker Environment Configuration
# Copy this file to .env and customize for your setup

# ===================================
# Network Configuration
# ===================================
# Network to operate on (ghostnet for testing, mainnet for production)
TEZOS_NETWORK=ghostnet

# Octez version to use (check https://gitlab.com/tezos/tezos/-/releases for latest)
OCTEZ_VERSION=v20.2

# Data directory for persistent storage (relative to project root)
DATA_DIR=./data

# ===================================
# Node Configuration
# ===================================
# P2P network port (standard: 9732)
P2P_PORT=9732

# RPC API port (standard: 8732)
RPC_PORT=8732

# Enable RPC API (needed for baker operations)
ENABLE_RPC=true

# RPC listening address (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
RPC_ADDR=127.0.0.1

# Maximum number of connections
MAX_CONNECTIONS=50

# ===================================
# Baker Configuration  
# ===================================
# Your baker key alias (will be created if doesn't exist)
BAKER_ALIAS=alice

# Automatically start baker process
ENABLE_BAKER=true

# Automatically start endorser process
ENABLE_ENDORSER=true

# Baker fee settings (in mutez, 1 XTZ = 1,000,000 mutez)
BAKER_FEE=1000
ENDORSER_FEE=1000

# ===================================
# Security Configuration
# ===================================
# Use hardware security module (Ledger) for mainnet
USE_LEDGER=false

# Ledger device path (usually /dev/hidraw0 on Linux)
LEDGER_PATH=/dev/hidraw0

# Enable remote signer (for distributed setups)
REMOTE_SIGNER=false
REMOTE_SIGNER_URL=http://localhost:6732

# ===================================
# Monitoring Configuration
# ===================================
# Enable monitoring stack
ENABLE_MONITORING=true

# Grafana admin credentials
GRAFANA_ADMIN=admin
GRAFANA_PASS=change_me_secure

# Grafana port
GRAFANA_PORT=3000

# Prometheus port
PROMETHEUS_PORT=9090

# Alert notification email
ALERT_EMAIL=baker@yourdomain.com

# Slack webhook for alerts (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# ===================================
# Backup Configuration
# ===================================
# Enable automatic backups
ENABLE_BACKUPS=true

# Backup frequency (daily, weekly)
BACKUP_FREQUENCY=daily

# S3 bucket for remote backups (optional)
BACKUP_S3_BUCKET=tezos-baker-backups
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_DEFAULT_REGION=us-east-1

# Local backup directory
BACKUP_DIR=./backups

# Encrypt backups with GPG
ENCRYPT_BACKUPS=false

# ===================================
# Logging Configuration
# ===================================
# Log level (DEBUG, INFO, NOTICE, WARNING, ERROR)
LOG_LEVEL=INFO

# Log directory
LOG_DIR=./logs

# Enable log rotation
LOG_ROTATION=true

# Keep logs for N days
LOG_RETENTION_DAYS=30

# ===================================
# Performance Configuration
# ===================================
# Node memory limit (for Docker)
NODE_MEMORY_LIMIT=4g

# Node CPU limit (number of cores)
NODE_CPU_LIMIT=2

# History mode (full, rolling, archive)
# full: keeps all blocks and operations
# rolling: keeps recent blocks only (saves space)
# archive: keeps everything (requires most storage)
HISTORY_MODE=rolling

# ===================================
# Development/Testing Configuration
# ===================================
# Enable development mode (more verbose logging)
DEV_MODE=false

# Skip snapshot import (start from genesis, very slow)
SKIP_SNAPSHOT=false

# Custom snapshot URL (optional, uses default if empty)
CUSTOM_SNAPSHOT_URL=

# Test with minimal stake (ghostnet only)
TEST_MODE=false

# ===================================
# Advanced Configuration
# ===================================
# Custom Octez image (leave empty for official)
CUSTOM_OCTEZ_IMAGE=

# Additional Octez node arguments
OCTEZ_NODE_ARGS=--connections 50

# Additional baker arguments
OCTEZ_BAKER_ARGS=

# Additional endorser arguments
OCTEZ_ENDORSER_ARGS=

# Enable metrics endpoint
ENABLE_METRICS=true
METRICS_PORT=9095

# Network bootstrap peers (comma-separated, optional)
BOOTSTRAP_PEERS=

# ===================================
# Container Configuration
# ===================================
# Container names
CONTAINER_PREFIX=tezos

# Restart policy (no, always, on-failure, unless-stopped)
RESTART_POLICY=unless-stopped

# User ID for container processes (for proper file permissions)
PUID=1000
PGID=1000

# Timezone for containers
TZ=UTC

# ===================================
# Validation Settings
# ===================================
# Minimum balance required for baking (XTZ)
MIN_BALANCE_MAINNET=6000
MIN_BALANCE_GHOSTNET=1000

# Maximum acceptable head lag (blocks)
MAX_HEAD_LAG=2

# Health check intervals (seconds)
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3